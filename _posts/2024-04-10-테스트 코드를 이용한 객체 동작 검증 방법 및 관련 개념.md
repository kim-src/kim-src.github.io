---
title: í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì´ìš©í•œ ê°ì²´ ë™ì‘ ê²€ì¦ ë°©ë²• ë° ê´€ë ¨ ê°œë…
date: 2024-04-10 18:00:00 +09:00
categories: [4. Fundamental, Spring]
tags: [Fundamental, Spring, Service, Repository, Test, AfterEach, BeforeEach, assertThat, isEqualTo, assertThrows, IllegalStateException]
---

<!-- 2024-04-10 ê¸€ ì‘ì„± ì‹œì‘; 2024-04-10 í˜ì´ì§€ í˜¸ì¶œ ì™„ë£Œ -->
<h2>ê°•ì˜ ë‚´ìš© ë³µìŠµ : ê¹€ì˜í•œì˜ ìŠ¤í”„ë§ ì…ë¬¸ ê°•ì˜ (ì„¹ì…˜ 3)</h2>
> - Tool :  
<img alt="IntelliJ" src="https://img.shields.io/badge/-IntelliJ-000000?style=flat-square&logo=intellij-idea&logoColor=white" />
<img alt="Spring Boot" src="https://img.shields.io/badge/-SpringBoot-6DB33F?style=flat-square&logo=spring&logoColor=white" />

<br>

### ğŸ”” ê°•ì˜ ë‚´ìš©
### ğŸ“Œ Javaì—ì„œì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±
> - Javaì—ì„œ ê°œë°œí•œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°ëŠ¥ì€ ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë©”ì¸ ë©”ì„œë“œì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.
> - ì´ì™€ëŠ” ë‹¬ë¦¬ í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„ ë°˜ë³µ ë˜ëŠ” ë‹¤ì¤‘ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.
> - ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ê³¼ì •ì—ì„œ ë²„ê·¸ ë˜ëŠ” ë³€ê²½ì‚¬í•­ì— ë”°ë¥¸ ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ì¡°ê¸°ì— ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> - Javaì˜ ëŒ€í‘œì ì¸ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ëŠ” JUnitì˜ Test APIê°€ ìˆìŠµë‹ˆë‹¤.

### ğŸ“Œ <a href="https://github.com/Kim-src/Study-Spring/blob/main/src/test/java/hello/hellospring/repository/MemoryMemberRepositoryTest.java">MemoryMemberRepository ê°ì²´ í…ŒìŠ¤íŠ¸</a>
> - ë©”ëª¨ë¦¬ ê³µê°„ì´ ì¸í„°í˜ì´ìŠ¤ì™€ ì˜ ì—°ê²°ë˜ì—ˆëŠ”ì§€, ì½”ë“œê°€ ì˜ ë™ì‘ë˜ëŠ”ì§€ í™•ì¸í•´ì•¼ ë©ë‹ˆë‹¤.
> - ì´ë¥¼ ìœ„í•´ Member ê°ì²´ì™€ JUnitì˜ Test, AfterEach, BeforeEach APIê°€ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.
> - Member ê°ì²´ì˜ name ë°ì´í„°ì— ì„ì˜ì˜ ì´ë¦„ìœ¼ë¡œ member1, member2ë¥¼ ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.
> - ìµœì¢…ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¦¬ìŠ¤íŠ¸í™” ì‹œí‚¤ê³  ë°ì´í„°ì˜ ê°œìˆ˜ë¥¼ íŒŒì•…í•˜ì˜€ìŠµë‹ˆë‹¤.
> - MemoryMemberRepository ê°ì²´ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì€ ê¸€ í•˜ë‹¨ì— ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

### ğŸ“Œ <a href="https://github.com/Kim-src/Study-Spring/blob/main/src/main/java/hello/hellospring/service/MemberService.java">MemberService ê°ì²´</a> ìƒì„±
> - íšŒì› ê´€ë¦¬ë¥¼ ìœ„í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë‚´ìš©ì„ í¬í•¨í•œ ì„œë¹„ìŠ¤ ê°ì²´ë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
> - MemberService ê°ì²´ëŠ” MemberRepository ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•©ë‹ˆë‹¤.
> - ê·¸ë¦¬ê³  í•´ë‹¹ ì˜ì¡´ì„±ì€ ìƒì„±ì ë©”ì„œë“œë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ì£¼ì…(DI)ë˜ê²Œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
> - DIì˜ ì¼í™˜ìœ¼ë¡œ MemberService ê°ì²´ ìƒì„± ì‹œ MemberRepositoryì— í• ë‹¹í•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
> - MemberService ê°ì²´ì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì€ ê¸€ í•˜ë‹¨ì— ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

### ğŸ“Œ <a href="https://github.com/Kim-src/Study-Spring/blob/main/src/test/java/hello/hellospring/service/MemberServiceTest.java">MemberService ê°ì²´ í…ŒìŠ¤íŠ¸</a>
> - MemberService ê°ì²´ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì€ ê¸€ í•˜ë‹¨ì— ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

### ğŸ”” ê°œë… ë³´ì¶©
### ğŸ“Œ Dependency Injection
> - ì˜ì¡´ì„± ì£¼ì… ê´€ë ¨ëœ ê°œë°œ ë‚´ìš©ì€ <a href="https://github.com/Kim-src/Study-Spring/blob/main/src/test/java/hello/hellospring/service/MemberServiceTest.java">ë‹¤ìŒ ë¸”ë¡œê·¸ ê¸€</a>ì— ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

### ğŸ“Œ @AfterEach
> - JUnit ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ëŒ€í‘œ ë©”ì„œë“œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.
> - í…ŒìŠ¤íŠ¸ ê°„ì˜ ì¶©ëŒ ë°©ì§€ë¥¼ ìœ„í•´ í…ŒìŠ¤íŠ¸ í›„ ì €ì¥ì†Œë¥¼ ë¹„ìš°ë„ë¡ ì„¤ì •í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.
> - ì´ëŠ” í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ëœ ì´í›„ë§ˆë‹¤ ì ìš©ë˜ë©° í…ŒìŠ¤íŠ¸ ì½”ë“œë¼ë¦¬ ì„œë¡œ ì˜ì¡´í•˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.

### ğŸ“Œ @BeforeEach
> - JUnit ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ëŒ€í‘œ ë©”ì„œë“œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.
> - í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ë©”ì„œë“œê°€ ìƒì„±ë˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.
> - ìƒì„±ëœ ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‹¤ë¥¸ ê°ì²´ì— ì˜ì¡´ì„± ì£¼ì…ìœ¼ë¡œ ì œê³µí•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
> - BeforeEach ê³¼ì •ì„ ê±°ì¹˜ë©´ ê° í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë  ë•Œ ë°ì´í„°ê°€ ì¤‘ë³µë˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.

### ğŸ“Œ assertThat
> - AssertJ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë©”ì„œë“œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.
> - assertThat ë©”ì„œë“œëŠ” ì‹¤ì œê°’ê³¼ ê¸°ëŒ“ê°’ì„ ë¹„êµí•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
> - ë©”ì„œë“œ ì‚¬ìš© ë°©ë²•ì˜ ì˜ˆì‹œë¡œëŠ” ```assertThat(actual).isEqualTo(expected)```ê°€ ìˆìŠµë‹ˆë‹¤.
> - ì—¬ê¸°ì„œ actual ê°’ì´ expected ê°’ê³¼ ë™ì¼í•œì§€ ë¹„êµí•©ë‹ˆë‹¤.

### ğŸ“Œ isEqualTo
> - AssertJ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë©”ì„œë“œ ì¤‘ í•˜ë‚˜ë¡œ ë³´í†µ assertThat ë©”ì„œë“œì™€ í•¨ê»˜ ì‚¬ìš©ë©ë‹ˆë‹¤.
> - ê°ì²´ì˜ ì‹¤ì²´ê°’ì´ ê¸°ëŒ“ê°’ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì‚¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.

### ğŸ“Œ assertThrows
> - AssertJ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë©”ì„œë“œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.
> - assertThrows ë©”ì„œë“œëŠ” íŠ¹ì • ì¡°ê±´ì—ì„œ ì˜ˆì™¸ì ì¸ ê°’ì´ ë°œìƒë˜ëŠ”ì§€ ê²€ì‚¬í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.
> - ë©”ì„œë“œ ì‚¬ìš© ë°©ë²•ì˜ ì˜ˆì‹œëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
> - ```assertThrows(IllegalStateException.class, () -> { /* í…ŒìŠ¤íŠ¸ ì½”ë“œ */ })```
> - ì˜ˆì‹œì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤í–‰ ì‹œ IllegalStateExceptionì´ ë°œìƒë˜ëŠ”ì§€ ê²€ì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ“Œ IllegalStateException
> - ë©”ì„œë“œê°€ ì ì ˆí•˜ì§€ ì•Šì€ í˜¸ì¶œì„ ë°›ì•˜ì„ ë•Œ ë°œìƒë˜ëŠ” ëŸ°íƒ€ì„ ì˜ˆì™¸ì…ë‹ˆë‹¤.
> - ì˜ˆë¥¼ë“¤ì–´ ì•„ì§ ê°ì²´ ì´ˆê¸°í™”ê°€ ë˜ì§€ ì•Šì•˜ê±°ë‚˜ ì†Œë¹„ëœ ìƒíƒœì—ì„œ ì‚¬ìš©í•˜ë ¤ê³  ì‹œë„í•  ë•Œ ë°œìƒë©ë‹ˆë‹¤.
> - ë”°ë¼ì„œ ë©”ì„œë“œê°€ ìš”êµ¬í•˜ëŠ” ê°ì²´ì˜ ìƒíƒœë¥¼ ì¶©ì¡±í•˜ëŠ”ì§€ì— ëŒ€í•œ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

### ğŸ”” ë¡œì§ ì´í•´
### ğŸ“Œ MemoryMemberRepository ê°ì²´ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ
> - ì•„ë˜ëŠ” MemoryMemberRepositoryTestì˜ ì „ì²´ ì½”ë“œì´ë©° ê´€ë ¨ ì„¤ëª…ì„ ì£¼ì„ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

``` java
package hello.hellospring.repository;

import hello.hellospring.domain.Member;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.Test;

import java.util.List;

import static org.assertj.core.api.Assertions.*;

class MemoryMemberRepositoryTest {

    MemoryMemberRepository repository = new MemoryMemberRepository();

    @AfterEach
    public void afterEach() {
        repository.clearStore();
    }
    // í…ŒìŠ¤íŠ¸ ê°„ì˜ ì¶©ëŒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ê°€ ì¢…ë£Œë  ë•Œë§ˆë‹¤ ì €ì¥ì†Œë¥¼ ë¹„ìš°ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

    @Test
    public void save() {
        // given
        Member member = new Member();
        member.setName("Spring");
        // Springì´ë¼ëŠ” nameì˜ ìƒˆë¡œìš´ Member ê°ì²´ë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

        // when
        repository.save(member);

        // then
        Member result = repository.findById(member.getId()).get();
        assertThat(result).isEqualTo(member);
        // Member ê°ì²´ì˜ ì €ì¥ëœ idì™€ ì¡°íšŒí•œ idê°€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.
    }

    @Test
    public void findByName() {
        // given
        Member member1 = new Member();
        member1.setName("Spring1");
        repository.save(member1);

        // given
        Member member2 = new Member();
        member2.setName("Spring2");
        repository.save(member2);
        // ë‹¤ë¥¸ name ê°’ì„ ê°€ì§„ íšŒì›(member1, member2) ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì €ì¥ì†Œì— ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.

        // when
        Member result = repository.findByName("Spring1").get();
        // ê°ì²´ì˜ name ê°’ì´ Spring1ì¸ Member ê°ì²´ë¥¼ ì¡°íšŒí•˜ì˜€ìŠµë‹ˆë‹¤.

        // then
        assertThat(result).isEqualTo(member1);
        // Spring1 nameìœ¼ë¡œ ì¡°íšŒëœ ê°ì²´ê°€ member1ì¸ì§€ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.
    }

    @Test
    public void findAll() {
        // given
        Member member1 = new Member();
        member1.setName("Spring1");
        repository.save(member1);

        // given
        Member member2 = new Member();
        member2.setName("Spring2");
        repository.save(member2);
        //  name ê°’ì´ ë‹¤ë¥¸ 2ê°œì˜ íšŒì› ê°ì²´ë¥¼ ìƒì„±í•˜ì˜€ê³  ì €ì¥ì†Œì— ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.

        // when
        List<Member> result = repository.findAll();
        // findAll ë©”ì„œë“œë¡œ ì €ì¥ì†Œì— ì €ì¥ëœ ëª¨ë“  íšŒì›ì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ì¡°íšŒí•˜ì˜€ìŠµë‹ˆë‹¤.

        // then
        assertThat(result.size()).isEqualTo(2);
        // ì¡°íšŒëœ ë¦¬ìŠ¤íŠ¸ì˜ í¬ê¸°ê°€ 2ì¸ì§€ ì¡°íšŒí•˜ì˜€ìŠµë‹ˆë‹¤.
    }
}
```

### ğŸ“Œ MemberService ê°ì²´
> - ì•„ë˜ëŠ” MemberService ê°ì²´ì˜ ì „ì²´ ì½”ë“œì´ë©° ê´€ë ¨ ì„¤ëª…ì„ ì£¼ì„ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

``` java
package hello.hellospring.service;

import hello.hellospring.domain.Member;
import hello.hellospring.repository.MemoryMemberRepository;
import hello.hellospring.repository.MemberRepository;

import java.util.List;
import java.util.Optional;

public class MemberService {

    private final MemberRepository memberRepository;

    // MemberService ê°ì²´ì— ì˜ì¡´ì„±ì„ ì£¼ì…í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½
    public MemberService(MemberRepository memberRepository) {
    // MemberService ê°ì²´ê°€ MemberRepository ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
    // í•´ë‹¹ ì˜ì¡´ì„±ì€ ìƒì„±ì ë©”ì„œë“œë¥¼ í†µí•´ ì™¸ë¶€ì—ì„œ ì£¼ì…ë˜ê²Œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
        this.memberRepository = memberRepository;
    }

    // íšŒì›ê°€ì… ê¸°ëŠ¥
    public Long join(Member member) {
        validateDuplicateMember(member);
        // ì£¼ì–´ì§„ Member ê°ì²´ì˜ ë°ì´í„°ê°€ ì €ì¥ì†Œì— ì´ë¯¸ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
        // ë‚´ë¶€ ë©”ì„œë“œì¸ validateDuplicateMemberì— ëŒ€í•œ ë¡œì§ì€ í•˜ë‹¨ ë¬¸ë‹¨ì— ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
        memberRepository.save(member);
        // Member ê°ì²´ì˜ ë°ì´í„°ê°€ ì¤‘ë³µë˜ì§€ ì•Šìœ¼ë©´ MemberRepositoryë¥¼ í†µí•´ ì €ì¥ì†Œì— Member ê°ì²´ë¥¼ ì €ì¥í•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
        return member.getId();
        // ìµœì¢…ì ìœ¼ë¡œ ë¡œì§ì— ë”°ë¼ ì €ì¥ëœ Memberì˜ idë¥¼ ë°˜í™˜í•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
    }

    // ì €ì¥ì†Œì˜ Member ê°ì²´ ì¤‘ë³µ ì—¬ë¶€ ê²€ì¦
    // í•´ë‹¹ ê²€ì¦ ë¡œì§ì€ ë‚´ë¶€ ë©”ì„œë“œë¡œ join ë©”ì„œë“œ ë‚´ì—ì„œ í˜¸ì¶œë©ë‹ˆë‹¤.
    private void validateDuplicateMember(Member member) {
        memberRepository.findByName(member.getName())
        // Member ê°ì²´ì˜ ì €ì¥ì†Œì— ì£¼ì–´ì§„ nameì´ ìˆëŠ”ì§€ ê²€ìƒ‰í•©ë‹ˆë‹¤.
                .ifPresent(m -> {
                // ë§Œì¼ ì €ì¥ì†Œì— ë™ì¼í•œ nameì˜ Member ê°ì²´ê°€ ì¡´ì¬í•œë‹¤ë©´ ëŒë‹¤ë¡œ ì´ì–´ì§€ê²Œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
                    throw new IllegalStateException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
                    // join ë©”ì„œë“œì—ì„œ idë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ IllegalStateExceptionì„ ë°˜í™˜í•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
                });
    }

    // ì „ì²´ íšŒì› ì¡°íšŒ ê¸°ëŠ¥
    public List<Member> findMembers() {
        return memberRepository.findAll();
        // ì €ì¥ì†Œì˜ findAll ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì „ì²´ íšŒì› ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•˜ê²Œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
    }

    // íŠ¹ì • íšŒì› ì¡°íšŒ ê¸°ëŠ¥
    public Optional<Member> findOne(Long memberId) {
        return memberRepository.findById(memberId);
        // ì €ì¥ì†Œì˜ findById ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ memberIdì— í•´ë‹¹ë˜ëŠ” Member ê°ì²´ë¥¼ Optional íƒ€ì…ìœ¼ë¡œ ë°˜í™˜í•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
    }
}
```

### ğŸ“Œ MemberService ê°ì²´ì˜ í…ŒìŠ¤íŠ¸ ì½”ë“œ
> - ì•„ë˜ëŠ” MemberServiceTestì˜ ì „ì²´ ì½”ë“œì´ë©° ê´€ë ¨ ì„¤ëª…ì„ ì£¼ì„ìœ¼ë¡œ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

``` java
package hello.hellospring.service;

import hello.hellospring.domain.Member;
import hello.hellospring.repository.MemoryMemberRepository;
import org.junit.jupiter.api.AfterEach;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertThrows;

public class MemberServiceTest {

    MemberService memberService;
    MemoryMemberRepository memberRepository;

    // ê°ê°ì˜ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì „ ìƒˆë¡œìš´ ë©¤ë²„ ë¦¬í¬ì§€í† ë¦¬ ë° ë©¤ë²„ ì„œë¹„ìŠ¤ ê°ì²´ ìƒì„±
    @BeforeEach
    public void beforeEach() {
        memberRepository = new MemoryMemberRepository();
        memberService = new MemberService(memberRepository);
        // í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ MemoryMemberRepositoryë¥¼ ìƒì„±í•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
        // ìƒì„±ëœ MemoryMemberRepository ì¸ìŠ¤í„´ìŠ¤ë¥¼ MemberServiceì— ì˜ì¡´ì„± ì£¼ì…ìœ¼ë¡œ ì œê³µí•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
        // ì´ ê³¼ì •ì„ ê±°ì¹˜ë©´ ê° í…ŒìŠ¤íŠ¸ ì‚¬ì´ì— ë°ì´í„°ê°€ ì¤‘ë³µë˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.
    }

    // ê°ê°ì˜ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„ ë©¤ë²„ ë¦¬í¬ì§€í† ë¦¬ì— ì €ì¥ëœ ë‚´ìš© ì‚­ì œ
    @AfterEach
    public void afterEach() {
        memberRepository.clearStore();
        // MemoryMemberRepositoryì— ì €ì¥ëœ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
    }

    // íšŒì›ê°€ì… ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
    @Test
    public void MemberJoin() throws Exception {
        // given
        Member member = new Member();
        member.setName("hello");
        // ìƒˆë¡œìš´ Member ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì´ë¦„ì„ ì„¤ì •í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

        // when
        Long saveId = memberService.join(member);
        // join ë©”ì„œë“œëŠ” Member ê°ì²´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ë°›ìŠµë‹ˆë‹¤.
        // ì „ë‹¬ë°›ì€ Member ê°ì²´ë¥¼ MemoryMemberServiceì— ì €ì¥í•©ë‹ˆë‹¤.
        // Member ê°ì²´ ì €ì¥ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ë©´ idê°€ ë°˜í™˜ë©ë‹ˆë‹¤.
        // ë°˜í™˜ëœ idëŠ” long íƒ€ì…ì˜ saveId ë³€ìˆ˜ì— ì €ì¥ë©ë‹ˆë‹¤.

        // then
        Member findMember = memberRepository.findById(saveId).get();
        // saveId ë³€ìˆ˜ì— ì €ì¥ëœ Memberì˜ idë¡œ íšŒì› ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.
        assertEquals(member.getName(), findMember.getName());
        // ì…ë ¥í•œ Memberì˜ nameê³¼ ì €ì¥ í›„ ì¡°íšŒëœ íšŒì› nameì´ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€í† í•©ë‹ˆë‹¤.
    }

    // ì¤‘ë³µ íšŒì› ì˜ˆì™¸ ì²˜ë¦¬ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸
    @Test
    public void ExceptionDuplicatedMember() throws Exception {
        // given
        Member member1 = new Member();
        member1.setName("spring");

        // given
        Member member2 = new Member();
        member2.setName("spring");
        // ë™ì¼í•œ nameì„ ê°€ì§„ member1, member2 ë³€ìˆ˜ë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

        // when
        memberService.join(member1);
        IllegalStateException e = assertThrows(IllegalStateException.class,
                () -> memberService.join(member2));
        // ì²« ë²ˆì§¸ íšŒì›ì¸ member1ì€ ì •ìƒì ìœ¼ë¡œ íšŒì›ê°€ì…ì‹œí‚µë‹ˆë‹¤.
        // í•˜ì§€ë§Œ member2ì˜ ê²½ìš° íšŒì›ê°€ì… ì‹œ IllegalStateExceptionì´ ë°œìƒë˜ëŠ”ì§€ ê²€ì‚¬í•©ë‹ˆë‹¤.

        // then
        assertThat(e.getMessage()).isEqualTo("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤.");
        // ì¤‘ë³µ ê²€ì‚¬ ê²°ê³¼ ì˜ˆì™¸ê°€ ë°œìƒë˜ì—ˆì„ ë•Œ ë°œìƒëœ ë©”ì‹œì§€ê°€ "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” íšŒì›ì…ë‹ˆë‹¤."ì™€ ì¼ì¹˜í•˜ëŠ”ì§€ ì¡°íšŒí•˜ë„ë¡ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
        // ì´ëŠ” ì¤‘ë³µ íšŒì› ê°€ì… ì‹œ ì˜ˆì™¸ ì²˜ë¦¬ê°€ ì˜¬ë°”ë¥´ê²Œ ë™ì‘í•˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
    }
}
```

<br>
<br>
<br>
